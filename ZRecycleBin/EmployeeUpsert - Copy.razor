@page "/employeelist/create"
@page "/employeelist/edit/{EmployeeId:int}"


@using AttendancePayrollWebServerApp.Helper
@using AttendancePayrollWebServerApp.Models
@inject EmployeeGateway _employeeGateway
@inject CompanyGateway _companyGateway
@inject DepartmentGateway _departmentGateway
@inject ShiftGateway _shiftGateway
@inject SalarySectionGateway _salarySectionGateway
@inject SectionGateway _sectionGateway
@inject DesignationGateway _designationGateway
@inject CategoryItemGateway _categoryItemGateway


@inject IJSRuntime _jsRuntime
<link rel="stylesheet" href="/css/CustomFieldSizeFontSize.css">

<div class="row my-0" style="height:5% ; width: 100 ;">
    <div class="d-flex justify-content-between align-items-start" style="height:5% ; width: 100; margin-left: -12px; ">
        <h3 class="card-title text-primary mb-3 ml-3">@title New Employee</h3>
    </div>
</div>

                      @* ********************************************************** *@
<div class="row my-0"  >
    <div class="col-10">


        @if (IsLoading)
        {
                <div class="text-center">
                    <img src="/images/Glass spheres.gif">
                </div>
        }
        else
        {
            <EditForm Model="employee" OnValidSubmit="UpsertEmployee" method="post">
                <DataAnnotationsValidator />
                <div class="row" style="width: 120% "> 
                    <!-------------------Left---------------------->
                      <div class="col-12 col-lg-8 p-0 ml-4 ml-md-0 mt-4 mt-md-0 " style="width:35%">

                                       <div class="row my-1 align-items-center">
                                                <div class="col-3 custom-input2">Emp Id</div>
                                                   <div class="col-9">
                                                        <InputText @bind-Value="employee.EmployeeId"  class="form-control custom-input2" style="margin-left: -12px; " ></InputText>
                                                    @* <ValidationMessage For="()=>employee.EmployeeId"></ValidationMessage> *@
                                                </div>
                                        </div>


                                        <div class="row my-1 align-items-center">
                                               <div class="col-3 custom-input2">Emp Name</div>
                                                   <div class="col-9">
                                                    <InputText @bind-Value="employee.EmployeeName"  class="form-control custom-input2"style="margin-left: -12px; "></InputText>
                                                    @* <ValidationMessage For="()=>employee.EmployeeName"></ValidationMessage> *@
                                            </div>
                                        </div>
                            
                                        <div class="row my-1 align-items-center">
                                          <div class="col-3 custom-input2">Company</div>
                                            <div class="col-9">
                                                    <InputSelect @bind-Value="employee.CompanyId" class="form-select custom-input2 light-violet" style="margin-left: -12px; ">
                                                    <option value="0" disabled="disabled" selected>-- Select Company --</option>
                                                    @foreach (var items in companeis)
                                                    {
                                                                             <option value="@items.CompanyId">@items.CompanyName</option>
                                                    }
                                                </InputSelect>
                                               @*  <ValidationMessage For="()=>employee.CompanyId"></ValidationMessage> *@
                                            </div>
                                         </div>


                                            <div class="row my-1 align-items-center">
                                                  <div class="col-3 custom-input2">Department</div>
                                                <div class="col-9">
                                                        <InputSelect @bind-Value="employee.DepartmentId" class="form-select custom-input2 light-violet" style="margin-left: -12px; ">
                                                        <option value="0" disabled="disabled" selected>-- Select Department --</option>
                                                            @foreach (var items in departments)
                                                            {
                                                                                     <option value="@items.DepartmentId">@items.DepartmentName</option>
                                                            }
                                                    </InputSelect>
                                                    @* <ValidationMessage For="()=>employee.DepartmentId"></ValidationMessage> *@
                                                </div>
                                            </div>


                                                 <div class="row my-1 align-items-center">
                                                      <div class="col-3 custom-input2">Section</div>
                                                    <div class="col-9">
                                                            <InputSelect @bind-Value="employee.SectionId" class="form-select custom-input2 light-violet" style="margin-left: -12px; ">
                                                                            <option value="0" disabled="disabled" selected>-- Select Section --</option>
                                                            @foreach (var items in sections)
                                                            {
                                                                     <option value="@items.SectionId">@items.SectionName</option>
                                                            }
                                                        </InputSelect>
                                                        @* <ValidationMessage For="()=>employee.SectionId"></ValidationMessage> *@
                                                    </div>
                                                </div>

                                                <div class="row my-1 align-items-center">
                                                      <div class="col-3 custom-input2">Sub Section</div>
                                                    <div class="col-9">
                                                            <InputSelect @bind-Value="employee.SalarySectionId" class="form-select custom-input2 light-violet" style="margin-left: -12px; ">
                                                                        <option value="0" disabled="disabled" selected>-- Salary Section --</option>
                                                        @foreach (var items in salarySections)
                                                        {
                                                                 <option value="@items.SalarySectionId">@items.SalarySectionName</option>
                                                        }
                                                        </InputSelect>
                                                       @*  <ValidationMessage For="()=>employee.SalarySectionId"></ValidationMessage> *@
                                                    </div>
                                                </div>

                                                 <div class="row my-1 align-items-center">
                                                      <div class="col-3 custom-input2 ">App Type</div>
                                                             <div class="col-9">
                                                                       <InputSelect @bind-Value="employee.AppointmentType" class="form-select custom-input2 light-violet" style="margin-left: -12px; ">
                                                                      <option value="0" disabled="disabled" selected> -- Appointment Type --</option>
                                                                      <option value="Contractual">Contractual</option>
                                                                      <option value="ABC">ABC</option>
                                                                     </InputSelect>
                                                                     @*  <ValidationMessage For="()=>employee.AppointmentType"></ValidationMessage> *@
                                                             </div>
                                                 </div>




                                                    <div class="row my-1 align-items-center">
                                                            <div class="col-3 custom-input2">Designation</div>
                                                        <div class="col-9">
                                                                    <InputSelect @bind-Value="employee.DesignationId" class="form-select custom-input2 light-violet" style="margin-left: -12px; ">
                                                                                <option value="0" disabled="disabled" selected>-- Select Designation --</option>
                                                                    @foreach (var items in designations)
                                                                    {
                                                                                            <option value="@items.DesignationId">@items.DesignationName</option>
                                                                    }
                                                            </InputSelect>
                                                               @*  <ValidationMessage For="()=>employee.DesignationId"></ValidationMessage> *@
                                                        </div>
                                                    </div>


                                                        <div class="row my-1 align-items-center">
                                                          <div class="col-3 custom-input2">Shift</div>
                                                        <div class="col-9">
                                                                <InputSelect @bind-Value="employee.ShiftId" class="form-select custom-input2 light-violet" style="margin-left: -12px; ">
                                                                                                    <option value="0" disabled="disabled" selected>-- Select Shift --</option>
                                                                        @foreach (var items in shifts)
                                                                        {
                                                                           <option value="@items.ShiftId">@items.ShiftName</option>
                                                                        }
                                                            </InputSelect>
                                                                     @*   <ValidationMessage For="()=>employee.ShiftId"></ValidationMessage> *@
                                                        </div>
                                                    </div>




                                                     @* <div class="row my-0 align-items-center">
                                                            <div class="col-3 custom-input2">Join Date</div>
                                                            <div class="col-9">
                                                                        <InputDate @bind-Value="employee.JoinDate" class="form-control custom-input2" style="margin-left: -12px; "></InputDate>
                                                            </div>
                                                        </div> *@



                        @*  ************************************** *@
                                                          <div class="row my-1 align-items-center" style="height:4% ; width: 100% ;">                                        
                                                                              
                                                                             <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                     <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Emp Type</div>                                                         
                                                                                          <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">                                                                     
                                                                                                <InputSelect @bind-Value="employee.EmployeeTypeCatItemId" class="form-select custom-input2 light-violet custom-input2" style="width: 100%; margin-left:9px;">
                                                                                                                <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                           
                                                                                                            @foreach (var items in employeeTypeCategoryItems)
                                                                                                            {
                                                                                                                    <option value="@items.CategoryId">@items.CategoryItemName</option>
                                                                                                            }
                                                                                                </InputSelect>
                                                                                                  @*  <ValidationMessage For="()=>employee.EmployeeTypeCatItemId"></ValidationMessage> *@
                                                                                           </div>
                                                                               </div>



                                                                               <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                       <div class="col-3 custom-input2" style="height: 99%; margin-left: 38px;">Floor</div>
                                                                                       <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                           <InputSelect @bind-Value="employee.FloorCatItemId" class="form-select custom-input2 light-violet custom-input2" style="width: 135%; margin-left:0px;">
                                                                                                        <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                       @*  <option value="0"  selected></option> *@
                                                                                                                    @foreach (var items in floorCategoryItems)
                                                                                                                    {
                                                                                                                       <option value="@items.CategoryId">@items.CategoryItemName</option>
                                                                                                                    }
                                                                                                </InputSelect>
                                                                                         @*  <ValidationMessage For="()=>employee.FloorCatItemId"></ValidationMessage>               *@
                                                                                       </div>
                                                                               </div>                                                                                      
                                                                 </div>
                        @*//**************************************// *@







                              

                                                      @*  ************************************** *@
                                                      <div class="row my-0 align-items-center" style="height:4.7% ; width: 100% ;">                                        
                                                                          <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                 <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Pay Source</div>                                                         
                                                                                      <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">                                                                     
                                                                                            <InputSelect @bind-Value="employee.PaySource" class="form-select custom-input2 light-violet custom-input2" style="width: 100%; margin-left:9px;">
                                                                                                         <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                        <option value="Bank">Bank</option>
                                                                                                        <option value="Cash">Cash</option>
                                                                                            </InputSelect>
                                                                                           @*  <ValidationMessage For="()=>employee.PaySource"></ValidationMessage> *@
                                                                                       </div>
                                                                           </div>



                                                                           <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                   <div class="col-3 custom-input2" style="height: 99%; margin-left: 38px;">Line</div>
                                                                                   <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                       <InputSelect @bind-Value="employee.LineCatItemId" class="form-select custom-input2 light-violet custom-input2" style="width: 135%; margin-left:0px;">
                                                                                                    <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                   @*  <option value="0"  selected></option> *@
                                                                                                @foreach (var items in lineCategoryItems)
                                                                                                {
                                                                                                    <option value="@items.CategoryId">@items.CategoryItemName</option>
                                                                                                }
                                                                                            </InputSelect>
                                                                                       @*  <ValidationMessage For="()=>employee.LineCatItemId"></ValidationMessage>               *@
                                                                                   </div>
                                                                           </div>                                                                                      
                                                             </div>
                                                        @*//**************************************// *@
                          
                                                      @*  ************************************** *@
                                                         <div class="row my-0 align-items-center" style="height:4.7% ; width: 100% ;">                                    
                                                                                  <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                                <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Basic Sal</div>
                                                                                                 <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">
                                                                                                         <InputNumber @bind-Value="employee.BasicSalary" class="form-control custom-input2  custom-input2" style="width: 100%; margin-left:9px;">                                                                                
                                                                                                        </InputNumber>
                                                                                                           @* <ValidationMessage For="()=>employee.BasicSalary"></ValidationMessage> *@
                                                                                                 </div>
                                                                                   </div>



                                                                                    <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                             <div class="col-3 custom-input2" style="height: 99%; margin-left: 38px;">Salary</div>
                                                                                                  <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                                       <InputNumber @bind-Value="employee.Salary" class="form-control custom-input2 custom-input2" style="width: 135%; margin-left:0px;">
                                                                                       
                                                                                                        </InputNumber>
                                                                                                   @*  <ValidationMessage For="()=>employee.Salary"></ValidationMessage>               *@
                                                                                                  </div>
                                                                                    </div>                                                                                      
                                                          </div>
                                                    @*  //*******************************************// *@



                                                        <div class="row my-1 align-items-center">
                                                                <div class="col-3 custom-input2">Join Date</div>
                                                                <div class="col-9">
                                                                            <InputDate @bind-Value="employee.JoinDate" class="form-control custom-input2" style="margin-left: -12px; "></InputDate>
                                                                </div>
                                                            </div>


                                                    <div class="row my-0 align-items-center">
                                                           <div class="col-3 custom-input2">Card No</div>
                                                               <div class="col-9">
                                                                <InputText @bind-Value="employee.CardID"  class="form-control custom-input2"style="margin-left: -12px; "></InputText>
                                                               @*  <ValidationMessage For="()=>employee.CardID"></ValidationMessage> *@
                                                        </div>
                                                    </div>


                                                        @*  ************************************** *@
                                                        <div class="row my-1 align-items-center" style="height:4.4% ; width: 100% ;">                                        
                                                                            <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                            <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Overtime</div>

                                                                                                                    <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">

                                                                                                    <InputSelect @bind-Value="employee.OverTimeYN" class="form-select custom-input2 light-violet custom-input2" style="width: 100%; margin-left:9px;">
                                                                                                <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                        <option value="Y">Y</option>
                                                                                                        <option value="N">N</option>
                                                                                            </InputSelect>
                                                                                              @*   <ValidationMessage For="()=>employee.OverTimeYN"></ValidationMessage> *@
                                                                                       </div>
                                                                             </div>



                                                                            <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                        <div class="col-3 custom-input2" style="height: 99%; margin-left: 38px;">Lunch</div>
                                                                                                <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                       <InputSelect @bind-Value="employee.LunchYN" class="form-select custom-input2 light-violet custom-input2" style="width: 135%; margin-left:0px;">
                                                                                                         <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                            <option value="Y">Y</option>
                                                                                                            <option value="N">N</option>
                                                                                            </InputSelect>
                                                                                        @* <ValidationMessage For="()=>employee.LunchYN"></ValidationMessage>               *@
                                                                                     </div>
                                                                             </div>                                                                                      
                                                                    </div>
                                                        @*  //*******************************************// *@


                                                        @*  ************************************** *@
                                                                     <div class="row my-0 align-items-center" style="height:5.2% ; width: 100% ;">                                        
                                                                                <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                                <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Transport</div>

                                                                                                                        <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">

                                                                                                        <InputSelect @bind-Value="employee.TransportYN" class="form-select custom-input2 light-violet custom-input2" style="width: 100%; margin-left:9px;">
                                                                                                    <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                            <option value="Y">Y</option>
                                                                                                            <option value="N">N</option>
                                                                                                </InputSelect>
                                                                                                       @*  <ValidationMessage For="()=>employee.TransportYN"></ValidationMessage> *@
                                                                                           </div>
                                                                                 </div>



                                                                                <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                            <div class="col-3 custom-input2" style="height: 99%; margin-left: 38px;">Active</div>
                                                                                                    <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                                                       <InputText @bind-Value="employee.ActiveYN" class="form-control custom-input2  custom-input2" style="width: 135%; margin-left:0px; background-color: gray;color: white" disabled>
                                                                                        
                                                                                                          </InputText>
                                                                                         
                                                                                         </div>
                                                                                 </div>                                                                                      
                                                                     </div>
                                                      @*  //*******************************************// *@

                                                        @*  ************************************** *@
                                                        <div class="row my-0 align-items-center" style="height:5.2% ; width: 100% ;">                                        
                                                                    <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                    <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">PF</div>

                                                                                                            <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">

                                                                                            <InputSelect @bind-Value="employee.ProvidentFundYN" class="form-select custom-input2 light-violet custom-input2" style="width: 100%; margin-left:9px;">
                                                                                        <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                <option value="Y">Y</option>
                                                                                                <option value="N">N</option>
                                                                                    </InputSelect>
                                                                                                @*  <ValidationMessage For="()=>employee.ProvidentFundYN"></ValidationMessage> *@
                                                                                </div>
                                                                        </div>



                                                                            <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                    <div class="col-3 custom-input2" style="height: 99%; margin-left: 32px;">BGMEAID</div>
                                                                                        <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                                <InputText @bind-Value="employee.BGMEAID" class="form-control custom-input2  custom-input2" style="width: 135%; margin-left:6px;" >

                                                                                                </InputText>
                                                                                </div>
                                                                        </div>                                                                                                    
                                                            </div>
                                                        @*  //*******************************************// *@


                                                        @*  ************************************** *@
                                                        <div class="row my-0 align-items-center" style="height:5% ; width: 100% ;">                                        
                                                                            <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                            <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Registration</div>

                                                                                                                    <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">

                                                                                                    <InputText @bind-Value="employee.RegistrationNo" class="form-control custom-input2  custom-input2" style="width: 100%; margin-left:9px;">
                                                                                       
                                                                                            </InputText>
                                                                                                           @*  <ValidationMessage For="()=>employee.RegistrationNo"></ValidationMessage> *@
                                                                                       </div>
                                                                             </div>



                                                                                  <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                                <div class="col-3 custom-input2" style="height: 99%; margin-left: 38px;">TIN</div>
                                                                                                <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                                       <InputText @bind-Value="employee.TinNo" class="form-control custom-input2  custom-input2" style="width: 135%; margin-left:0px;" >

                                                                                                      </InputText>
                                                                                     </div>
                                                                             </div>                                                                                                    
                                                       </div>
                                                      @*  //*******************************************// *@




                                                     @*******************************************@
                                                       <div class="row my-0 align-items-center" style="height:4.8% ; width: 100% ;">                                        
                                                                <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                        <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Confirm</div>

                                                                                                                <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">

                                                                                                            <InputText @bind-Value="employee.ConfirmYN" class="form-control custom-input2  custom-input2" style="width: 100%; margin-left:9px; background-color: gray;color: white" disabled>

                                                                                        </InputText>
                                                                                                        
                                                                                   </div>
                                                                         </div>

                                                            <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                        <div class="col-3 custom-input2" style="height: 99%; margin-left: 28px;">Conf.Date</div>
                                                                                <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                                       <InputDate @bind-Value="employee.ConfirmDate" class="form-control custom-input2  custom-input2" style="width: 148%; margin-left:0px; background-color: gray;color: white" disabled>
                                                                                        
                                                                                      </InputDate>
                                                                     </div>
                                                             </div>                                                                                      
                                                         </div>
                                                       @*//*******************************************//*@

                                                       @*******************************************@
                                                          <div class="row my-0 align-items-center" style="height:5.3% ; width: 100% ;">                                        
                                                                    <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                            <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Release</div>

                                                                                                                    <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">

                                                                                                                <InputText @bind-Value="employee.ReleaseYN" class="form-control custom-input2  custom-input2" style="width: 100%; margin-left:9px; background-color: gray;color: white" disabled>

                                                                                            </InputText>

                                                                                       </div>
                                                                             </div>

                                                                <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                            <div class="col-3 custom-input2" style="height: 99%; margin-left: 28px;">Rels.Date</div>
                                                                                    <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                          <InputDate @bind-Value="employee.ReleaseDate" class="form-control custom-input2  custom-input2" style="width: 148%; margin-left:0px; background-color: gray;color: white" disabled>

                                                                                          </InputDate>
                                                                         </div>
                                                                 </div>                                                                                      
                                                        </div>
                                                        @*//*******************************************//*@

                                                         <div class="row my-0 align-items-center">
                                                                   <div class="col-3 custom-input2">Bank</div>
                                                                       <div class="col-9">
                                                                                    <InputText @bind-Value="employee.BankName"  class="form-control custom-input2" style="margin-left: -12px; background-color: gray;color: white" disabled></InputText>
                                                                </div>
                                                            </div>


                                                            <div class="row my-1 align-items-center">
                                                                   <div class="col-3 custom-input2">Bank Acc.</div>
                                                                       <div class="col-9">
                                                                                <InputText @bind-Value="employee.BankAccNo"  class="form-control custom-input2"style="margin-left: -12px; background-color: gray;color: white "disabled></InputText>
                                                                </div>
                                                            </div>

                      </div>
                      <!--------------------------Left Ended---------------------------->
                      <div class="col-12 col-lg-8 p-0 ml-4 ml-md-0 mt-4 mt-md-0 " style="width:0%"></div>
                      <!-------------------------- Middle ---------------------------->
                      <div class="col-12 col-lg-8 p-0 ml-4 ml-md-0 mt-4 mt-md-0 " style="width:32%">




                                                     @*  ************************************** *@
                                                    <div class="row my-1 align-items-center" style="height:5% ; width: 103% ; ">                                        
                                                                    <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                    <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">Gender</div>

                                                                                                            <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">

                                                                                            <InputSelect @bind-Value="employee.Sex" class="form-select custom-input2 light-violet custom-input2" style="width: 100%; margin-left:9px;">
                                                                                        <option value="0" disabled="disabled" selected>-Select-</option>
                                                                                                    <option value="Male">Male</option>
                                                                                                        <option value="Female">Female</option>
                                                                                    </InputSelect>
                                                                                                    @* <ValidationMessage For="()=>employee.Sex"></ValidationMessage> *@
                                                                               </div>
                                                                     </div>



                                                                          <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                        <div class="col-3 custom-input2" style="height: 99%; margin-left: 32px;">Religion</div>
                                                                                        <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                                       <InputSelect @bind-Value="employee.Religion" class="form-select custom-input2 light-violet custom-input2" style="width: 145%; margin-left:0px;">
                                                                                                                             <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                                                    <option value="Buddist">Buddist</option>
                                                                                                                                    <option value="Cristian">Cristian</option>
                                                                                                                                    <option value="Islam">Islam</option>
                                                                                                                                    <option value="Sanatan">Sanatan</option>
                                                                                                                         </InputSelect>
                                                                                                                      @*  <ValidationMessage For="()=>employee.Religion"></ValidationMessage> *@
                                                                          </div>
                                                                       </div>                                                            
                                                     </div>
                                                    @*  //*******************************************// *@
                                 
                                                    <div class="row my-0 align-items-center" style="display: flex; align-items: center;">
                                                                      <div class="col-4 custom-input2" style="flex: 0 0 auto; width:28%; ">Marital Status</div>
                                                              <div class="col-5">
                                                                    <InputSelect @bind-Value="employee.MaritalStatus" class="form-select light-violet custom-input2" style="width:199%; margin-left: -22px;">
                                                                           @*  <InputSelect @bind-Value="employee.CompanyId" class="form-select custom-input2 light-violet" style="margin-left: -12px; "> *@
                                                                            <option value="0" disabled="disabled" selected>-- Select Marital Status --</option>
                                                                                    <option value="Married">Married</option>
                                                                                        <option value="Unmarried">Unmarried</option>
                                                                </InputSelect>     
                                                                   @*  <ValidationMessage For="() => employee.MaritalStatus"></ValidationMessage> *@
                                                              </div>
                                                     </div>
                                               

                                                    <div class="row my-1 align-items-center">
                                                            <div class="col-3 custom-input2">P.Strength</div>
                                                                <div class="col-9">
                                                                    <InputText @bind-Value="employee.PhysicalStrength" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                </div>
                                                    </div>

                                                    <div class="row my-1 align-items-center">
                                                                    <div class="col-3 custom-input2">Experience</div>
                                                                    <div class="col-9">
                                                                        <InputText @bind-Value="employee.Experience" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                    </div>
                                                    </div>



                                                      <div class="row my-1 align-items-center">
                                                        <div class="col-3 custom-input2">D.of Birth   </div>
                                                        <div class="col-9">
                                                                        <InputDate @bind-Value="employee.DateOfBirth" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputDate>
                                                        </div>
                                                      </div>


                                                      @* 
                                                      <div class="row my-1 align-items-center">
                                                        <div class="col-3 custom-input2">Age Birth   </div>
                                                        <div class="col-9">
                                                                        <InputDate @bind-Value="employee.DateOfBirth" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputDate>
                                                        </div>
                                                      </div>
                                                    *@


                                                        <div class="row my-1 align-items-center">
                                                          <div class="col-3 custom-input2">Mobile No</div>
                                                             <div class="col-9">
                                                                        <InputText @bind-Value="employee.MobileNo" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                             </div>
                                                        </div>

                                                        <div class="row my-1 align-items-center">
                                                            <div class="col-3 custom-input2">EMG.Cont</div>
                                                                <div class="col-9">
                                                                            <InputText @bind-Value="employee.EmergencyContact" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                               </div>
                                                        </div>

                                                         <div class="row my-1 align-items-center">
                                                          <div class="col-3 custom-input2">National Id</div>
                                                                 <div class="col-9">
                                                                        <InputText @bind-Value="employee.NID" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                </div>
                                                        </div>



                                                        <div class="row my-1 align-items-center">
                                                            <div class="col-3 custom-input2">Birth Cert.</div>
                                                                    <div class="col-9">
                                                                            <InputText @bind-Value="employee.BirthCertificateNo" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                    </div>
                                                        </div>
                                                    

                                                        <div class="row my-1 align-items-center">
                                                              <div class="col-3 custom-input2">Passport No</div>
                                                                <div class="col-9">
                                                                                <InputText @bind-Value="employee.PassportNo" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                </div>
                                                        </div>


                                                        <div class="row my-1 align-items-center">
                                                            <div class="col-3 custom-input2">Serv.Book</div>
                                                                 <div class="col-9">
                                                                                <InputText @bind-Value="employee.DrivingLicenseNo" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                 </div>
                                                       </div>



                                                         @*  ************************************** *@
                                                          <div class="row my-0 align-items-center" style="height:5% ; width: 103% ; ">                                        
                                                                        <div class="row my-0 align-items-center position-relative" style="height:90%; width: 53%; ">
                                                                                        <div class="col-3 custom-input2" style=" width: 50%; height: 99%;">H. Edu.</div>

                                                                                                                <div class="position-absolute end-0 pe-0 " style="width: 54%; height: 99%; ">

                                                                                                <InputSelect @bind-Value="employee.HeistEducationCatItemId" class="form-select custom-input2 light-violet custom-input2" style="width: 100%; margin-left:9px;">
                                                                                                                 <option value="0" disabled="disabled" selected>-Select-</option>
                                                                                                               @*  <option value="0"  selected></option> *@
                                                                                                                        @foreach (var items in educationCategoryItems)
                                                                                                                        {
                                                                                                                          <option value="@items.CategoryId">@items.CategoryItemName</option>
                                                                                                                        }

                                                                                                          </InputSelect>
                                                                                                           @*  <ValidationMessage For="()=>employee.HeistEducationCatItemId"></ValidationMessage> *@
                                                                                   </div>
                                                                         </div>



                                                                              <div class="row my-0 align-items-center " style="height:90%; width: 55%;">
                                                                                            <div class="col-3 custom-input2" style="height: 99%; margin-left: 32px;">Blood</div>
                                                                                            <div  style="width: 50%; height: 99%; margin-left: 12px;">
                                                                                                                           <InputSelect @bind-Value="employee.Blood" class="form-select custom-input2 light-violet custom-input2" style="width: 145%; margin-left:0px;">
                                                                                                                                 <option value="0" disabled="disabled" selected>--Select--</option>
                                                                                                                                        <option value="A+">A+</option>
                                                                                                                                        <option value="O+">O-</option>
                                                                                                                                        <option value="AB+">AB+</option>
                                                                                                                                        <option value="AB-">AB-</option>
                                                                                                                             </InputSelect>
                                                                                                                             @*   <ValidationMessage For="()=>employee.Blood"></ValidationMessage> *@
                                                                              </div>
                                                                         </div>                                                            
                                                           </div>
                                                         @*  //*******************************************// *@

                                                            <div class="row my-1 align-items-center">
                                                                    <div class="col-3 custom-input2">Body Sign</div>
                                                                        <div class="col-9">
                                                                            <InputText @bind-Value="employee.BodySign" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                         </div>
                                                            </div>



                                                            <div class="row my-1 align-items-center">
                                                                <div class="col-3 custom-input2">Email</div>
                                                                     <div class="col-9">
                                                                                <InputText @bind-Value="employee.Mail" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                      </div>
                                                            </div>

                                                            <div class="row my-1 align-items-center">
                                                                 <div class="col-3 custom-input2">F. Name</div>
                                                                      <div class="col-9">
                                                                            <InputText @bind-Value="employee.FatherName" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                     </div>
                                                           </div>

                                                            <div class="row my-1 align-items-center">
                                                                     <div class="col-3 custom-input2">M. Name</div>
                                                                            <div class="col-9">
                                                                                <InputText @bind-Value="employee.MotherName" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                            </div>
                                                            </div>

                                                            <div class="row my-1 align-items-center">
                                                                    <div class="col-3 custom-input2">SP. Name</div>
                                                                          <div class="col-9">
                                                                                <InputText @bind-Value="employee.SpouseName" class="form-control custom-input2" style="margin-left: -10px; width:104%; "></InputText>
                                                                          </div>
                                                            </div>


                                                            <div class="row my-1 align-items-center">
                                                                    <div class="col-3 custom-input2">Present Address</div>
                                                                             <div class="col-9">
                                                                                        <InputTextArea @bind-Value="employee.PresentAddress" class="form-control custom-input2" style="margin-left: -10px; width:104%;"></InputTextArea>
                                                                             </div>
                                                            </div>

                                                            <div class="row my-1 align-items-center">
                                                                    <div class="col-3 custom-input2">Permanent Address</div>
                                                                         <div class="col-9">
                                                                                    <InputTextArea @bind-Value="employee.PermanentAddress" class="form-control custom-input2" style="margin-left: -10px; width:104%;"></InputTextArea>
                                                                         </div>
                                                            </div>

                       </div>
                      <!------------------ middle Ended------------------------->
                      <div class="col-12 col-lg-8 p-0 ml-4 ml-md-0 mt-4 mt-md-0 " style="width:1%"></div>
                      <!------------------Right---------------------------->
                      <div class="col-12 col-lg-8 p-0 ml-4 ml-md-0 mt-4 mt-md-0 " style="width:32%">


                                                           <div class="row my-1 align-items-center">
                                                                   <div class="col-3 custom-input2">নাম</div>
                                                                       <div class="col-9">
                                                                            <InputText @bind-Value="employee.EmployeeNameBan" style="margin-left: -10px;  width:104%;"  class="form-control custom-input2"></InputText>
                                                                            @* <ValidationMessage For="()=>employee.EmployeeNameBan"></ValidationMessage> *@
                                                                </div>
                                                            </div>


                                                            <div class="row my-1 align-items-center">
                                                                   <div class="col-3 custom-input2">পিতার নাম</div>
                                                                       <div class="col-9">
                                                                        <InputText @bind-Value="employee.FatherNameBan" style="margin-left: -10px;  width:104%;" class="form-control custom-input2"></InputText>
                                                                           @*  <ValidationMessage For="()=>employee.FatherNameBan"></ValidationMessage> *@
                                                                </div>
                                                            </div>

                                                            <div class="row my-1 align-items-center">
                                                                   <div class="col-3 custom-input2">মাতার নাম</div>
                                                                       <div class="col-9">
                                                                        <InputText @bind-Value="employee.MotherNameBan" style="margin-left: -10px;  width:104%;" class="form-control custom-input2"></InputText>
                                                                         @*  <ValidationMessage For="()=>employee.MotherNameBan"></ValidationMessage> *@
                                                                </div>
                                                            </div>

                                                            <div class="row my-1 align-items-center">
                                                                           <div class="col-3 custom-input2">স্বামী/স্ত্রী নাম</div>
                                                                       <div class="col-9">
                                                                        <InputText @bind-Value="employee.SpouseNameBan" style="margin-left: -10px;  width:104%;" class="form-control custom-input2"></InputText>
                                                                       @*  <ValidationMessage For="()=>employee.SpouseNameBan"></ValidationMessage> *@
                                                                </div>
                                                            </div>


                                                            <div class="row my-1 align-items-center">
                                                                 <div class="col-3 custom-input2">বর্তমান ঠিকানা</div>
                                                                      <div class="col-9">
                                                                                <InputTextArea @bind-Value="employee.PresentAddressBan" class="form-control custom-input2" style="margin-left: -10px; width:104%;"></InputTextArea>
                                                                         </div>
                                                           </div>


                                                            <div class="row my-1 align-items-center">
                                                                <div class="col-3 custom-input2">স্থায়ী ঠিকানা</div>
                                                                <div class="col-9">
                                                                                    <InputTextArea @bind-Value="employee.PermanentAddressBan" class="form-control custom-input2" style="margin-left: -10px; width:104%;"></InputTextArea>
                                                                </div>
                                                            </div>
                             
                      
                      </div>
                      <!--------------------------------right Ended-------------------------------->
                                                           <div class="my-5" >
                                                                        <button class="btn btn-primary custom-input2" style="outline: none;  margin-left: 87px; width: 26% " >Click Here to @title</button>                                   
                                                           </div>
                 </div>     
            </EditForm>  
        }

    </div>
</div>


@code {
    [Parameter]
    public string? EmployeeId { get; set; }

    private Employee employee { get; set; } = new Employee();
    private List<Employee> employees { get; set; } = new List<Employee>();
    private List<Company> companeis { get; set; } = new List<Company>();
    private List<Department> departments { get; set; } = new List<Department>();
    private List<Shift> shifts { get; set; } = new List<Shift>();
    private List<Section> sections { get; set; } = new List<Section>();
    private List<SalarySection> salarySections { get; set; } = new List<SalarySection>();
    private List<Designation> designations { get; set; } = new List<Designation>();

    private List<CategoryItem> lineCategoryItems { get; set; } = new List<CategoryItem>();
    private List<CategoryItem> educationCategoryItems { get; set; } = new List<CategoryItem>();
    private List<CategoryItem> employeeTypeCategoryItems { get; set; } = new List<CategoryItem>();
    private List<CategoryItem> floorCategoryItems { get; set; } = new List<CategoryItem>();


    DateTime defaultDate = DateTime.Parse("1900-01-01");


    private String title { get; set; } = "Entry";
    private bool IsLoading { get; set; }

    int lineCatId = 17;
    int educationCatId = 19;
    int employeeTypeCatId = 20;
    int floorCatId = 16;

    // protected override async Task OnInitializedAsync()
    // {
    //     if (EmployeeId is null)
    //     {
    //         //create
    //         employee = new Employee();
    //         await LoadEmployee();

    //     }
    //     else
    //     {
    //         // Update
    //         title = "Update";
    //         // await LoadQuotations();
    //     }
    // }


    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await LoadEmployee();
        }
    }

    private async Task LoadEmployee()
    {
        IsLoading = true;
        StateHasChanged();
        //   employees = await _employeeGateway.GetEmployeeList();
        companeis = await _companyGateway.GetCompanyList();
        departments = await _departmentGateway.GetDepartmentsList();
        shifts = await _shiftGateway.GetShiftsList();
        sections = await _sectionGateway.GetSectionList();
        salarySections = await _salarySectionGateway.GetSalarySectionList();
        designations = await _designationGateway.GetDesignationList();

        var categoryItems = await _categoryItemGateway.GetCategoryItemList();
        lineCategoryItems = categoryItems.Where(data => data.CategoryId == lineCatId).ToList();
        educationCategoryItems = categoryItems.Where(data => data.CategoryId == educationCatId).ToList();
        employeeTypeCategoryItems = categoryItems.Where(data => data.CategoryId == employeeTypeCatId).ToList();
        floorCategoryItems = categoryItems.Where(data => data.CategoryId == floorCatId).ToList();

        IsLoading = false;
        StateHasChanged();
    }


    private async Task UpsertEmployee()
    {
        bool isExist = await _employeeGateway.IsExist(employee.EmployeeId);
        if (isExist)
        {
            await _jsRuntime.ToastrError("Employee Id already exists");
            return;
        }


        if (title == "Entry")
        {
            employee = new Employee
                {
                    EmployeeId = employee.EmployeeId,
                    EmployeeName = employee.EmployeeName,
                    DesignationId = employee.DesignationId,
                    CompanyId = employee.CompanyId,
                    DepartmentId = employee.DepartmentId,
                    SectionId = employee.SectionId,
                    SalarySectionId = employee.SalarySectionId,
                    FloorCatItemId = employee.FloorCatItemId,
                    LineCatItemId = employee.LineCatItemId,
                    ShiftId = employee.ShiftId,
                    Sex = employee.Sex,
                    DateOfBirth = employee.DateOfBirth,
                    Religion = employee.Religion,
                    Blood = employee.Blood,
                    MobileNo = employee.MobileNo,
                    EmergencyContact = employee.EmergencyContact,
                    Mail = employee.Mail,
                    EmployeeNameBan = employee.EmployeeNameBan,
                    FatherName = employee.FatherName,
                    MotherName = employee.MotherName,
                    SpouseName = employee.SpouseName,
                    FatherNameBan = employee.FatherNameBan,
                    MotherNameBan = employee.MotherNameBan,
                    SpouseNameBan = employee.SpouseNameBan,
                    PermanentAddress = employee.PermanentAddress,
                    PermanentAddressBan = employee.PermanentAddressBan,
                    PresentAddress = employee.PresentAddress,
                    PresentAddressBan = employee.PresentAddressBan,
                    MaritalStatus = employee.MaritalStatus,
                    NID = employee.NID,
                    BirthCertificateNo = employee.BirthCertificateNo,
                    PassportNo = employee.PassportNo,
                    DrivingLicenseNo = employee.DrivingLicenseNo,
                    BodySign = employee.BodySign,
                    JoinDate = employee.JoinDate,
                    ReleaseYN = "N",//"y",//employee.ReleaseYN,
                    ReleaseDate =defaultDate,// ,DateTime.Today,//employee.ReleaseDate,
                    Salary = employee.Salary,
                    BasicSalary = employee.BasicSalary,
                    OverTimeYN = employee.OverTimeYN,
                    LunchYN = employee.LunchYN,
                    ConfirmYN = "",//employee.ConfirmYN,
                    ConfirmDate = defaultDate,  //employee.ConfirmDate,
                    TransportYN = employee.TransportYN,
                    PaySource = employee.PaySource,
                    ActiveYN = "Y",//employee.ActiveYN,
                    CardID = employee.CardID,
                    SN =11,
                    EmployeeTypeCatItemId = employee.EmployeeTypeCatItemId,
                    AppointmentType = employee.AppointmentType,
                    HeistEducationCatItemId = employee.HeistEducationCatItemId,
                    ProvidentFundYN = employee.ProvidentFundYN,
                    SalaryBuyer =1000,//employee.SalaryBangla,
                    JoiningDateBuyer = defaultDate,//DateTime.Today,
                    BuyerShow = "Y",   //employee.BuyerShow,
                    BankName = "",
                    BankAccNo ="",
                    BGMEAID = employee.BGMEAID,
                    TinNo = employee.TinNo,
                    RegistrationNo = employee.RegistrationNo,
                    PhysicalStrength=employee.PhysicalStrength,
                    Experience=employee.Experience
                };
            await _employeeGateway.Save(employee);
            employees.Add(employee);
            await _jsRuntime.ToastrSuccess("Employee Created Successfully");
            await LoadEmployee();
          //  await LoadCompanyId();
         //   ResetData();
        }
        else
        {
            //update
            // await _quotationMTRepository.Update(Quotation, userId);
            // await _jsRuntime.ToastrSuccess("Quotation Updated Successfully");
            // _navigationManager.NavigateTo($"quotation/addproducts/{Quotation.QuotationId}");
        }
    }




  //  style=" width: 45%; border: 1px solid black; margin-left: 60px; "





                // EmployeeId = employee.EmployeeId,
                // EmployeeName = employee.EmployeeName,
                // DesignationId = employee.DesignationId,
                // CompanyId = employee.CompanyId,
                // DepartmentId = employee.DepartmentId,
                // SectionId = employee.SectionId,
                // SalarySectionId = employee.SalarySectionId,
                // FloorCatItemId = employee.FloorCatItemId,
                // LineCatItemId = employee.LineCatItemId,
                // ShiftId = employee.ShiftId,
                // Sex = employee.Sex,
                // DateOfBirth = employee.DateOfBirth,
                // Religion = employee.Religion,
                // Blood = employee.Blood,
                // MobileNo = employee.MobileNo,
                // EmergencyContact = employee.EmergencyContact,
                // Mail = employee.Mail,
                // EmployeeNameBan = employee.EmployeeNameBan,
                // FatherName = employee.FatherName,
                // MotherName = employee.MotherName,
                // SpouseName = employee.SpouseName,
                // FatherNameBan = employee.FatherNameBan,
                // MotherNameBan = employee.MotherNameBan,
                // SpouseNameBan = employee.SpouseNameBan,
                // PermanentAddress = employee.PermanentAddress,
                // PermanentAddressBan = employee.PermanentAddressBan,
                // PresentAddress = employee.PresentAddress,
                // PresentAddressBan = employee.PresentAddressBan,
                // MaritalStatus = employee.MaritalStatus,
                // NID = employee.NID,
                // BirthCertificateNo = employee.BirthCertificateNo,
                // PassportNo = employee.PassportNo,
                // DrivingLicenseNo = employee.DrivingLicenseNo,
                // BodySign = employee.BodySign,
                // JoinDate = employee.JoinDate,
                // ReleaseYN = employee.ReleaseYN,
                // ReleaseDate = employee.ReleaseDate,
                // Salary = employee.Salary,
                // BasicSalary = employee.BasicSalary,
                // OverTimeYN = employee.OverTimeYN,
                // LunchYN = employee.LunchYN,
                // ConfirmYN = employee.ConfirmYN,
                // ConfirmDate = employee.ConfirmDate,
                // TransportYN = employee.TransportYN,
                // PaySource = employee.PaySource,
                // ActiveYN = employee.ActiveYN,
                // CardID = employee.CardID,
                // SN = employee.SN,
                // EmployeeType = employee.EmployeeType,
                // AppointmentType = employee.AppointmentType,
                // HeistEducationCatItemId = employee.HeistEducationCatItemId,
                // ProvidentFundYN = employee.ProvidentFundYN,
                // SalaryBangla = employee.SalaryBangla,
                // JoiningDateBan = employee.JoiningDateBan,
                // BuyerShow = employee.BuyerShow,
                // BankName = employee.BankName,
                // BankAccNo = employee.BankAccNo,
                // BGMEAID = employee.BGMEAID,
                // TinNo = employee.TinNo,
                // RegistrationNo = employee.RegistrationNo
}



